<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOF Fitness | Sales Performance Reports</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="../static/sales.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <!-- Mobile Toggle Button -->
    <button class="mobile-toggle" id="mobileToggle">
        <i class="fa-solid fa-bars"></i>
    </button>

    <!-- Desktop Toggle Button -->
    <button class="toggle-sidebar-btn" id="toggleBtn">
        <i class="fa-solid fa-chevron-left"></i>
    </button>

    <div class="dashboard-container">

        <aside class="sidebar">
            <div class="logo-area">
                <img src="../icons/logo-light(1).png" alt="JOF Logo" class="brand-logo">
            </div>

            <div class="nav-label">MENU</div>
            <nav class="navigation">
                <a href="dashboard.html" class="nav-link">
                    <img src="../icons/chart-pie-solid-full.svg" alt="Dashboard" width="20">
                    <span>Dashboard</span>
                </a>
                <div class="nav-item-dropdown">
                    <a href="members.html" class="nav-link">
                        <img src="../icons/users-solid-full.svg" alt="Members" width="20">
                        <span>Members</span>
                        <i class="fa-solid fa-chevron-right ms-auto nav-arrow"></i>
                    </a>
                    <div class="sidebar-submenu">
                        <a href="add_member.html">Add New Member</a>
                        <a href="received_payments.html">Payment Details</a>
                        <a href="progress_report.html">Member Progress</a>
                    </div>
                </div>
                <div class="nav-item-dropdown">
                    <a href="diet-plans.html" class="nav-link">
                        <img src="../icons/carrot-solid-full.svg" alt="Diet Plans" width="20">
                        <span>Diet Plans</span>
                        <i class="fa-solid fa-chevron-right ms-auto nav-arrow"></i>
                    </a>
                    <div class="sidebar-submenu">
                        <a href="create_diet_plan.html">Create Diet Plan</a>
                        <a href="assign_diet_plan.html">Assign</a>
                    </div>
                </div>
                <a href="staff.html" class="nav-link">
                    <img src="../icons/clipboard-user-solid-full.svg" alt="Staff" width="20">
                    <span>Staff</span>
                </a>
                <a href="membership.html" class="nav-link">
                    <img src="../icons/credit-card-regular-full.svg" alt="Membership" width="20">
                    <span>Membership</span>
                </a>
                <a href="payments.html" class="nav-link">
                    <img src="../icons/indian-rupee-sign-solid-full.svg" alt="Payments" width="20">
                    <span>Payments</span>
                </a>
                <div class="nav-item-dropdown active">
                    <a href="sales_leads.html" class="nav-link active">
                        <img src="../icons/chart-line-solid-full.svg" alt="Sales" width="20">
                        <span>Sales Management</span>
                        <i class="fa-solid fa-chevron-right ms-auto nav-arrow"></i>
                    </a>
                    <div class="sidebar-submenu">
                        <a href="sales_leads.html">New Leads</a>
                        <a href="sales_reports.html" class="active">Conversion Reports</a>
                    </div>
                </div>
                <div class="nav-item-dropdown">
                    <a href="reports_pg.html" class="nav-link">
                        <img src="../icons/chart-line-solid-full.svg" alt="Reports" width="20">
                        <span>Reports</span>
                        <i class="fa-solid fa-chevron-right ms-auto nav-arrow"></i>
                    </a>
                    <div class="sidebar-submenu">
                        <a href="reports/feedback_sentiment.html">Feedback & Sentiment</a>
                        <a href="reports/renewal_report.html">Renewal Report</a>
                        <a href="reports/revenue_source.html">Revenue Report</a>
                        <a href="reports/trainer_performance.html">Trainer Performance</a>
                    </div>
                </div>
            </nav>
        </aside>

        <main class="main-content">

            <!-- Page Header -->
            <header class="page-header">
                <div class="header-text">
                    <h1>Sales Performance Reports</h1>
                    <p>Analyze conversion rates and lost opportunities</p>
                </div>
                <div class="profile-pic">
                    <img src="https://ui-avatars.com/api/?name=Staff&background=F25C2A&color=fff" alt="Profile">
                </div>
            </header>

            <!-- Section 1: Lead Conversion -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3><i class="fa-solid fa-funnel-dollar"></i> Lead Conversion Funnel</h3>
                    <p>Track the journey from initial leads to joined members</p>
                </div>
                <div class="chart-container">
                    <canvas id="funnelChart"></canvas>
                </div>
            </div>

            <!-- Source Analysis Chart -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3><i class="fa-solid fa-chart-bar"></i> Lead Source Performance</h3>
                    <p>Compare which sources bring the most converted members</p>
                </div>
                <div class="chart-container">
                    <canvas id="sourceChart"></canvas>
                </div>
            </div>

            <!-- Section 2: Cancellation/Lost Report -->
            <div class="table-card">
                <div class="table-header">
                    <h3><i class="fa-solid fa-circle-xmark"></i> Lost Leads & Cancellations</h3>
                </div>

                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Contact</th>
                            <th>Source</th>
                            <th>Reason Not Joined</th>
                            <th>Date Lost</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-label="Name">
                                <strong>Rajesh Gupta</strong>
                            </td>
                            <td data-label="Contact">
                                +91 99887 76655
                            </td>
                            <td data-label="Source">
                                <span class="badge badge-social">Social Media</span>
                            </td>
                            <td data-label="Reason">
                                Too Expensive
                            </td>
                            <td data-label="Date Lost">
                                Jan 22, 2026
                            </td>
                        </tr>

                        <tr>
                            <td data-label="Name">
                                <strong>Kavita Nair</strong>
                            </td>
                            <td data-label="Contact">
                                +91 88776 65544
                            </td>
                            <td data-label="Source">
                                <span class="badge badge-ads">Advertisement</span>
                            </td>
                            <td data-label="Reason">
                                Distance from Location
                            </td>
                            <td data-label="Date Lost">
                                Jan 20, 2026
                            </td>
                        </tr>

                        <tr>
                            <td data-label="Name">
                                <strong>Suresh Iyer</strong>
                            </td>
                            <td data-label="Contact">
                                +91 77665 54433
                            </td>
                            <td data-label="Source">
                                <span class="badge badge-walkin">Walk-in</span>
                            </td>
                            <td data-label="Reason">
                                Joined Competitor
                            </td>
                            <td data-label="Date Lost">
                                Jan 18, 2026
                            </td>
                        </tr>

                        <tr>
                            <td data-label="Name">
                                <strong>Deepa Krishnan</strong>
                            </td>
                            <td data-label="Contact">
                                +91 66554 43322
                            </td>
                            <td data-label="Source">
                                <span class="badge badge-referral">Word of Mouth</span>
                            </td>
                            <td data-label="Reason">
                                Schedule Conflict
                            </td>
                            <td data-label="Date Lost">
                                Jan 15, 2026
                            </td>
                        </tr>

                        <tr>
                            <td data-label="Name">
                                <strong>Manish Verma</strong>
                            </td>
                            <td data-label="Contact">
                                +91 55443 32211
                            </td>
                            <td data-label="Source">
                                <span class="badge badge-social">Social Media</span>
                            </td>
                            <td data-label="Reason">
                                Health Issues
                            </td>
                            <td data-label="Date Lost">
                                Jan 12, 2026
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </main>
    </div>

    <!-- JavaScript for Toggle Functionality and Charts -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const toggleBtn = document.getElementById('toggleBtn');
            const mobileToggle = document.getElementById('mobileToggle');
            const body = document.body;
            const sidebar = document.querySelector('.sidebar');

            // Desktop toggle button
            if (toggleBtn) {
                toggleBtn.addEventListener('click', function () {
                    body.classList.toggle('collapsed');
                });
            }

            // Mobile toggle button
            if (mobileToggle) {
                mobileToggle.addEventListener('click', function () {
                    body.classList.toggle('sidebar-open');
                });
            }

            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', function (event) {
                const isClickInsideSidebar = sidebar.contains(event.target);
                const isClickOnToggle = mobileToggle.contains(event.target);

                if (!isClickInsideSidebar && !isClickOnToggle && body.classList.contains('sidebar-open') && window.innerWidth <= 992) {
                    body.classList.remove('sidebar-open');
                }
            });

            // Dropdown functionality
            const dropdownItems = document.querySelectorAll('.nav-item-dropdown');
            dropdownItems.forEach(item => {
                const link = item.querySelector('.nav-link');
                const arrow = link ? link.querySelector('.nav-arrow') : null;

                if (arrow) {
                    arrow.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();

                        dropdownItems.forEach(otherItem => {
                            if (otherItem !== item) {
                                otherItem.classList.remove('active');
                            }
                        });

                        item.classList.toggle('active');
                    });
                }
            });

            // === CHART.JS - Conversion Funnel Chart ===
            const funnelCtx = document.getElementById('funnelChart').getContext('2d');
            new Chart(funnelCtx, {
                type: 'bar',
                data: {
                    labels: ['Leads Generated', 'Visited Gym', 'Trial Booked', 'Joined as Member'],
                    datasets: [{
                        label: 'Number of People',
                        data: [150, 95, 52, 38],
                        backgroundColor: [
                            'rgba(242, 92, 42, 0.8)',
                            'rgba(167, 139, 250, 0.8)',
                            'rgba(52, 211, 153, 0.8)',
                            'rgba(59, 130, 246, 0.8)'
                        ],
                        borderRadius: 10,
                        borderWidth: 0
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: '#1a202c',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            padding: 12,
                            borderColor: '#F25C2A',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        y: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // === CHART.JS - Source Analysis Chart ===
            const sourceCtx = document.getElementById('sourceChart').getContext('2d');
            new Chart(sourceCtx, {
                type: 'bar',
                data: {
                    labels: ['Social Media', 'Advertisement', 'Walk-in', 'Word of Mouth'],
                    datasets: [
                        {
                            label: 'Total Leads',
                            data: [60, 35, 30, 25],
                            backgroundColor: 'rgba(167, 139, 250, 0.6)',
                            borderRadius: 8
                        },
                        {
                            label: 'Converted Members',
                            data: [15, 8, 10, 5],
                            backgroundColor: 'rgba(242, 92, 42, 0.8)',
                            borderRadius: 8
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 13
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: '#1a202c',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            padding: 12,
                            borderColor: '#F25C2A',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        });
    </script>

</body>

</html>